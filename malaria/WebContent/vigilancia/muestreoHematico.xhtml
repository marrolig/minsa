<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sis="http://java.sun.com/jsf/composite/sis"    
	xmlns:ni="http://minsa.gob.ni/mat">

<ui:define name="titulo">
  Muestreos Hemáticos
</ui:define>

<h:body>

	<ui:composition template="/templates/main-template.xhtml" >


	<ui:define name="content">
	
		<style type="text/css">
			.ui-datatable-scrollable-body {
				overflow-y:auto !important;
				overflow-x:hidden !important;
			}
			.ui-inputfield {
				padding:0px !important;
			}
			
		</style>

	<f:view>
	
	<h:form id="frmMuestreo">
	
		<ni:titleBar titleText="Vigilancia > Registro de Muestreo Hemático" />

		<p:growl id="grwMensaje" showDetail="true" life="5000" />
		
		<p:ajaxStatus style="width:16px;height:16px;position:absolute; top:0px; left:48%;">
			<f:facet name="start">
				<h:graphicImage value="../images/loading.gif" />
			</f:facet>
			
			<f:facet name="complete">
				<h:outputText value="" />
			</f:facet>
		</p:ajaxStatus>
		
		<p:panel id="panControl"  
				 styleClass="panDetail" 
				 style="position:absolute; top:21px; left:5px; height:90px; width:985px;">
		
			<h:outputLabel for="cboEntidad" styleClass="lblDefaultSmall" 
						   value="Entidad Administrativa:" 
						   style="position:absolute; left:10px; top:8px;"/>
			<h:selectOneMenu id="cboEntidad" styleClass="txtDefault cboDefault" 
							 disabled="#{muestreoHematicoBean.estado!=0}"
							 style="position:absolute; left:10px;top:23px;width:205px;" 
							 value="#{muestreoHematicoBean.entidadSelectedId}">
					<f:selectItems value="#{muestreoHematicoBean.entidades}" var="entidad"
								   itemValue="#{entidad.entidadAdtvaId}"
								   itemLabel="#{entidad.nombre}" />
					<p:ajax event="change" process="cboEntidad" 
							onstart="statusDialog.show();" oncomplete="statusDialog.hide();" 
							listener="#{muestreoHematicoBean.obtenerUnidades}" 
							update="panControl,grwMensaje,panButton"/>
			</h:selectOneMenu>

			<h:outputLabel for="cboUnidad" styleClass="lblDefaultSmall" 
						   value="Unidad de Salud que notifica o recibe la notificación:" 
						   style="position:absolute; left:220px; top:8px;"/>
			<h:selectOneMenu id="cboUnidad" styleClass="txtDefault cboDefault" 
							 disabled="#{muestreoHematicoBean.estado!=0}"  
							 style="position:absolute; left:220px;top:23px;width:340px;" 
							 value="#{muestreoHematicoBean.unidadSelectedId}"> 
					<f:selectItem itemValue="0" itemLabel=" " /> 
					<f:selectItems var="unidad" 
								   itemValue="#{unidad.unidadId}" 
								   itemLabel="#{unidad.nombre}" 
								   value="#{muestreoHematicoBean.unidades}" />
					<p:ajax event="change" process="cboUnidad" 
							onstart="statusDialog.show();" oncomplete="statusDialog.hide();"
							listener="#{muestreoHematicoBean.cambiarUnidad}" 
							update="panControl,grwMensaje,panButton"/>
			</h:selectOneMenu>

			<h:outputLabel for="txtColVol" styleClass="lblDefaultSmall" 
							   value="Nombre del Colaborador Voluntario:" 
							   style="position:absolute; left:220px; top:50px;"/>
		    <h:inputText id="txtColVol" style="position:absolute; left:220px; top:65px; width:312px;"
					value="#{muestreoHematicoBean.nombreColVol}"
					disabled="true"
					styleClass="txtDefault" > 
			</h:inputText>
			
			<p:commandButton id="btnBuscarColVol" 
							 icon="icon-dbase" ajax="true"
							 disabled="#{muestreoHematicoBean.estado!=0}" 
							 title="Haga clic para búsqueda de colaboradores voluntarios"
							 style="position:absolute; left:540px;top:65px;width:21px;height:21px;"
							 onstart="statusDialog.show();" actionListener="#{muestreoHematicoBean.listarColVoles}"
        					 oncomplete="statusDialog.hide();dlgColVol.show();"
        					 update="frmMuestreo:grdColVoles,frmMuestreo:txtFiltroColVol,frmMuestreo:panButtonColVol,grwMensaje"  
        				 	 process="@this,cboUnidad" />

			<h:outputLabel for="txtClave" styleClass="lblDefaultSmall" 
					value="Clave:" 
					style="position:absolute; left:570px; top:8px;"/>
			<h:inputText id="txtClave" style="position:absolute; left:570px; top:23px; width:110px; height:60px; font-size:30px !important;"
					value="#{muestreoHematicoBean.clave}"
					disabled="#{muestreoHematicoBean.estado!=0}"
					styleClass="txtDefault" >

				<p:ajax event="change" process="@this" 
						listener="#{muestreoHematicoBean.cambiarClave}" 
						onstart="statusDialog.show();" oncomplete="statusDialog.hide();document.getElementById('frmMuestreo:txtLamina').focus();"
						update="@form"/>
						
			</h:inputText>

			<h:outputLabel for="txtLamina" styleClass="lblDefaultSmall" 
					value="Lámina:" 
					style="position:absolute; left:693px; top:8px;"/>
			<h:inputText id="txtLamina" style="position:absolute; left:693px; top:23px; width:87px; height:60px; font-size:30px !important;"
					value="#{muestreoHematicoBean.numeroLamina}"
					disabled="#{muestreoHematicoBean.estado!=0}"
					styleClass="txtDefault" >
				<p:ajax event="change" process="@this"  
						listener="#{muestreoHematicoBean.comprobarLamina}"
						onstart="statusDialog.show();" oncomplete="statusDialog.hide();document.getElementById('frmMuestreo:txtFechaMuestra').focus();" 
						update="@form"/>
			</h:inputText>

			<h:outputLink id="lnkAceptarLamina" value="javascript:void(0)" 
					styleClass="btLinkControl" rendered="#{muestreoHematicoBean.estado==0}"
            		style="position: absolute; width:40px; height:11px; top: 7px; left: 730px;cursor:pointer;text-decoration:none;" >
				 <h:graphicImage height="11" 
				 					style="position: absolute; top: 1px; left:1px;"
				 					url="/images/check8px.png">
				 </h:graphicImage>&nbsp;&nbsp;Aceptar
			</h:outputLink>

			<h:outputLink id="lnkCancelarLamina" value="javascript:void(0)" 
					styleClass="btLinkControl" rendered="#{muestreoHematicoBean.estado!=0}"     
            		style="position: absolute; width:40px; height:11px; top: 7px; left: 730px;cursor:pointer;text-decoration:none;" >
				 <h:graphicImage height="11" 
				 					style="position: absolute; top: 1px; left:1px;"
				 					url="/images/cross8px.png">
				 </h:graphicImage>&nbsp;&nbsp;Cancelar
				 <p:ajax event="click" listener="#{muestreoHematicoBean.cancelarLamina}"
				 		 onstart="statusDialog.show();" oncomplete="statusDialog.hide();" process="@this" 
						 update="@form" />
			</h:outputLink>
			
			<h:outputLabel for="txtFechaMuestra" styleClass="lblDefaultSmall" 
							   value="Toma Muestra Gota Gruesa:" 
							   style="position:absolute; left:790px; top:8px;"/>
			<h:inputText id="txtFechaMuestra" style="position:absolute; left:790px; top:23px; width:115px;"
						 value="#{muestreoHematicoBean.muestreoHematicoSelected.fechaToma}"
						 disabled="#{muestreoHematicoBean.estado!=0 and muestreoHematicoBean.estado!=1}"
						 styleClass="txtDefault fechaMuestra">
				<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				<p:ajax event="change" process="@this" 
						listener="#{muestreoHematicoBean.calcularSemana}" 
						update="txtSemanaEpi,txtAnioEpi" />
			</h:inputText>
			<script type="text/javascript">
				jQuery('.fechaMuestra').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
			</script> 
			
			<h:outputLabel for="cboTipoBusqueda" styleClass="lblDefaultSmall" 
						 value="Búsqueda:" 
					   	 style="position:absolute; left:917px; top:8px;"/>
			<h:selectOneMenu id="cboTipoBusqueda" styleClass="txtDefault cboDefault"  
						 style="position:absolute; left:917px;top:23px;width:60px;" 
						 value="#{muestreoHematicoBean.muestreoHematicoSelected.tipoBusqueda}"> 
				<f:selectItem itemValue="0" itemLabel="Pasivo" />
				<f:selectItem itemValue="1" itemLabel="Activo" />
			</h:selectOneMenu>
			
			<h:outputLabel for="txtMunicipio" styleClass="lblDefaultSmall" 
							   value="Municipio:" 
							   style="position:absolute; left:10px; top:50px;"/>
			<h:inputText id="txtMunicipio" style="position:absolute; left:10px; top:65px; width:198px;"
							 value="#{muestreoHematicoBean.unidadSelected.municipio.nombre}" 
							 styleClass="txtDefault" disabled="true" />
			
			<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Semana Epidemiológica:" 
							   style="position:absolute; left:790px; top:50px;"/>
			<h:inputText id="txtSemanaEpi" style="position:absolute; left:790px; top:65px; width:40px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.semanaEpidemiologica}" 
							 styleClass="txtDefault" disabled="true" />
			<h:inputText id="txtAnioEpi" style="position:absolute; left:842px; top:65px; width:62px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.añoEpidemiologico}" 
							 styleClass="txtDefault" disabled="true" />
							 
			<h:outputLink disabled="#{muestreoHematicoBean.puestoNotificacionId==0 and muestreoHematicoBean.unidadSelectedId==0}" 
						 	onclick="dlgListaMuestras.show()" 
				 			value="javascript:void(0)" 
				 			style="position:absolute; top:55px; left:915px; width:46px; height:28px; padding-top:1px;padding-bottom:1px;padding-left:7px;padding-right:7px;" 
				 			styleClass="navDelLink">
				 	<h:outputText value="Consultar Muestras"/>
				 	<f:ajax event="click"  
				 			listener="#{muestreoHematicoBean.obtenerMuestras}" 
				 			render="@this">
					</f:ajax>
			</h:outputLink>
		
        </p:panel>

		<p:panel id="panPaciente" 
				 styleClass="panDetail" 
				 style="position:absolute; top:119px; left:5px; height:135px; width:985px;">

				<h:outputLabel for="txtNombre" styleClass="lblDefaultSmall" 
							   value="Nombre y apellidos del paciente:" 
							   style="position:absolute; left:10px; top:8px;"/>
				<h:inputText id="txtNombre" style="position:absolute; left:10px; top:23px; width:300px;"
							 value="#{muestreoHematicoBean.personaSelected.primerNombre} #{muestreoHematicoBean.personaSelected.segundoNombre} #{muestreoHematicoBean.personaSelected.primerApellido} #{muestreoHematicoBean.personaSelected.segundoApellido}" 
							 styleClass="txtDefault" disabled="true" />

				<p:commandButton id="btnEditarPersona" icon="icon-user" ajax="true" 
						 title="Haga clic para seleccionar o agregar al paciente"
						 style="position:absolute; left:323px;top:23px;width:21px;height:21px;"
        				 oncomplete="#{empty muestreoHematicoBean.personaSelected?'dlgBusquedaPersona.show()':'dlgPersona.show()'};"  
        				 process="@this panPaciente" />

				<h:outputLabel for="txtMHSexo" styleClass="lblDefaultSmall" 
							   value="Sexo:" 
							   style="position:absolute; left:350px; top:8px;"/>
				<h:inputText id="txtMHSexo" style="position:absolute; left:350px; top:23px; width:70px;"
							 value="#{muestreoHematicoBean.personaSelected.sexoValor}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="txtMHFechaNacimiento" styleClass="lblDefaultSmall" 
							   value="Fecha de Nacimiento:" 
							   style="position:absolute; left:430px; top:8px;"/>
				<h:inputText id="txtMHFechaNacimiento" style="position:absolute; left:430px; top:23px; width:107px;"
							 value="#{muestreoHematicoBean.personaSelected.fechaNacimiento}" 
							 styleClass="txtDefault" disabled="true">
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				</h:inputText>

				<h:outputLabel for="txtMHEdad" styleClass="lblDefaultSmall" 
							   value="Edad:" 
							   style="position:absolute; left:547px; top:8px;"/>
				<h:inputText id="txtMHEdad" style="position:absolute; left:547px; top:23px; width:53px;"
							 value="#{muestreoHematicoBean.personaSelected.edadEnAnios}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="txtMHTipoIdentificacion" styleClass="lblDefaultSmall" 
							   value="Identificación: #{muestreoHematicoBean.personaSelected.identValor}" 
							   style="position:absolute; left:610px; top:8px;"/>
				<h:inputText id="txtMHTipoIdentificacion" style="position:absolute; left:610px; top:23px; width:148px;"
							 value="#{muestreoHematicoBean.personaSelected.identNumero}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="txtMHEtnia" styleClass="lblDefaultSmall" 
							   value="Etnia:" 
							   style="position:absolute; left:770px; top:8px;"/>
				<h:inputText id="txtMHEtnia" style="position:absolute; left:770px; top:23px; width:135px;"
							 value="#{muestreoHematicoBean.personaSelected.etniaValor}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="cboEmbarazada" styleClass="lblDefaultSmall" 
						 	value="Embarazada:" 
					   	 	style="position:absolute; left:917px; top:8px;"/>
				<h:selectOneMenu id="cboEmbarazada" styleClass="txtDefault cboDefault"
							disabled="#{muestreoHematicoBean.personaSelected.sexoCodigo!='SEXO|F'}"  
						 	style="position:absolute; left:917px;top:23px;width:60px;" 
						 	value="#{muestreoHematicoBean.muestreoHematicoSelected.embarazada}">
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItem itemLabel="No" itemValue="0" />
					<f:selectItem itemLabel="Si" itemValue="1" />
				</h:selectOneMenu>

				<h:outputLabel for="txtMHResidencia" styleClass="lblDefaultSmall" 
							   value="Municipio, Comunidad (Barrio o Localidad) de Residencia:" 
							   style="position:absolute; left:10px; top:50px;"/>
				<h:inputText id="txtMHResidencia" style="position:absolute; left:10px; top:65px; width:445px;"
							 value="#{muestreoHematicoBean.personaSelected.muniResiNombre}, #{muestreoHematicoBean.personaSelected.comuResiNombre}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="txtMHDirResidencia" styleClass="lblDefaultSmall" 
							   value="Dirección de Residencia:" 
							   style="position:absolute; left:465px; top:50px;"/>
				
				<h:inputText id="txtMHDirResidencia" style="position:absolute; left:465px; top:65px; width:506px;"
							 value="#{muestreoHematicoBean.personaSelected.direccionResi}" 
							 styleClass="txtDefault" disabled="true" />

				<h:outputLabel for="txtMHComunidad" styleClass="lblDefaultSmall" 
							   value="Comunidad:" 
							   style="position:absolute; left:10px; top:92px;"/>
				<h:inputText id="txtMHComunidad" style="position:absolute; left:10px; top:107px; width:70px;"
							 value="#{muestreoHematicoBean.personaSelected.comuResiCodigo}" 
							 styleClass="txtDefault" disabled="true" />

				<h:panelGroup id="panManzana">
					<h:outputLabel for="txtManzana" styleClass="lblDefaultSmall" 
								   value="Manzana:" 
								   style="position:absolute; left:95px; top:92px;"/>
					<h:inputText id="txtManzana" disabled="true"
								 style="position:absolute; left:95px; top:107px; width:75px;"
								 value="#{muestreoHematicoBean.manzanaCodigo}" 
								 styleClass="txtDefault" />
					<h:outputLink id="btnQuitarManzana" 
							      rendered="#{!empty muestreoHematicoBean.manzanaCodigo}"
								  styleClass="navLinkInside" value="javascript:void(0)"
								  title="Elimina la asociación con la manzana"
								  style="position:absolute; left:158px; top:109px;">
						<h:graphicImage url="../images/delete.gif" width="14" height="14" style="right:0px; border:0px;"  />
						<f:ajax event="click" listener="#{muestreoHematicoBean.quitarManzana}" 
								render="panManzana" execute="@this" />
					</h:outputLink>
					<p:commandButton id="btnSeleccionManzana" 
							 icon="icon-dbase" ajax="true" rendered="#{!empty muestreoHematicoBean.personaSelected.comuResiCodigo}" 
							 title="Haga clic para seleccionar una manzana de la comunidad"
							 style="position:absolute; left:179px;top:107px;width:21px;height:21px;"
	        				 oncomplete="dlgManzana.show();" 
    	    				 update="frmMuestreo:grdManzanas frmMuestreo:panButtonManzana"  
        					 process="@this" />
        	    </h:panelGroup>

				<h:panelGroup id="panVivienda">
					<h:outputLabel for="txtVivienda" styleClass="lblDefaultSmall" 
								   value="Vivienda:" 
								   style="position:absolute; left:202px; top:92px;"/>
					<h:inputText id="txtVivienda" disabled="true" 
								 style="position:absolute; left:202px; top:107px; width:75px;"
								 value="#{muestreoHematicoBean.viviendaCodigo}" 
								 styleClass="txtDefault" />
					<h:outputLink id="btnQuitarVivienda" 
						      rendered="#{!empty muestreoHematicoBean.viviendaCodigo}"
							  styleClass="navLinkInside" value="javascript:void(0)"
							  title="Elimina la asociación con la vivienda"
							  style="position:absolute; left:266px; top:109px;">
						<h:graphicImage url="../images/delete.gif" width="14" height="14" style="right:0px; border:0px;"  />
						<f:ajax event="click" listener="#{muestreoHematicoBean.quitarVivienda}" 
							render="panVivienda" execute="@this" />
					</h:outputLink>
					<p:commandButton id="btnSeleccionVivienda" 
							 icon="icon-dbase" ajax="true"
							 rendered="#{!empty muestreoHematicoBean.personaSelected.comuResiCodigo}" 
							 title="Haga clic para seleccionar la vivienda"
							 style="position:absolute; left:286px;top:107px;width:21px;height:21px;"
        					 oncomplete="dlgVivienda.show();"
        					 update="frmMuestreo:grdViviendas frmMuestreo:panButtonVivienda"  
        				 	 process="@this" />
				</h:panelGroup>
				
				<h:outputLabel for="txtMHTelefono" styleClass="lblDefaultSmall" 
							   value="Teléfonos:" 
							   style="position:absolute; left:310px; top:92px;"/>
				<h:inputText id="txtMHTelefono" style="position:absolute; left:310px; top:107px; width:121px;"
							 value="#{muestreoHematicoBean.personaSelected.telefonoResi} #{muestreoHematicoBean.personaSelected.telefonoMovil}" 
							 styleClass="txtDefault" disabled="true" />							 

				<h:outputLabel for="txtMHOcupacion" styleClass="lblDefaultSmall" 
							   value="Ocupación:" 
							   style="position:absolute; left:444px; top:92px;"/>
				<h:inputText id="txtMHOcupacion" style="position:absolute; left:444px; top:107px; width:183px;"
							 value="#{muestreoHematicoBean.personaSelected.ocupacionValor}" 
							 styleClass="txtDefault" disabled="true" />							 

				<h:outputLabel for="txtEmpleador" styleClass="lblDefaultSmall" 
							   value="Empleador o Lugar de Trabajo:" 
							   style="position:absolute; left:640px; top:92px;"/>
				<h:inputText id="txtEmpleador" style="position:absolute; left:640px; top:107px; width:330px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.empleador}" 
							 styleClass="txtDefault" />							 

		
		</p:panel>

		<p:panel id="panReferente" 
				 styleClass="panDetail" 
				 style="position:absolute; top:262px; left:5px; height:66px; width:225px;">

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Persona de Referencia o de Contacto" 
							   style="position:absolute; left:10px; top:8px; font-weight:bold;"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{empty muestreoHematicoBean.muestreoHematicoSelected.personaReferente}"
							   value="No existen datos para la persona de contacto" 
							   style="position:absolute; left:10px; top:30px; font-style:italic;"/>

				<h:outputLabel id="lblNombreReferente" styleClass="lblDefaultSmall" 
							   rendered="#{!empty muestreoHematicoBean.muestreoHematicoSelected.personaReferente}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.personaReferente}" 
							   style="position:absolute; left:10px; top:25px;"/>

				<h:outputLabel id="lblTelefonoReferente" styleClass="lblDefaultSmall" 
							   rendered="#{!empty muestreoHematicoBean.muestreoHematicoSelected.personaReferente}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.telefonoReferente}" 
							   style="position:absolute; left:10px; top:42px;"/>

				<p:commandButton id="btnReferente" icon="#{empty muestreoHematicoBean.muestreoHematicoSelected.personaReferente?'icon-form-add':'icon-form-edit'}" ajax="true"
						 title="Haga clic para agregar o editar los datos del referente"
						 style="position:absolute; left:200px;top:41px;width:21px;height:21px;"
        				 oncomplete="dlgReferente.show();"
        				 update="frmMuestreo:panDetalleReferente frmMuestreo:panButtonReferente" 
        				 process="@this" />

		</p:panel>

		<p:panel id="panTratamiento" 
				 styleClass="panDetail" 
				 style="position:absolute; top:262px; left:238px; height:66px; width:750px;">

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Síntomas y Tratamiento" 
							   style="position:absolute; left:10px; top:8px; font-weight:bold;"/>

				<h:outputLabel for="txtInicioSintomas" styleClass="lblDefaultSmall" 
							   value="Inicio de Síntomas:" 
							   style="position:absolute; left:10px; top:26px;"/>
				<h:inputText id="txtInicioSintomas" style="position:absolute; left:10px; top:41px; width:95px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.inicioSintomas}" 
							 styleClass="txtDefault iniSintomas" >	
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
						<f:ajax event="blur" 
							render="panTratamiento" execute="@this" />
				</h:inputText>
				<script type="text/javascript">
						jQuery('.iniSintomas').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
				</script> 
							 
				<h:outputLink id="btnQuitarIniSintomas" 
							  rendered="#{!empty muestreoHematicoBean.muestreoHematicoSelected.inicioSintomas}"
							  styleClass="navLink" value="javascript:void(0)"
							  title="Quitar la declaración de la fecha de inicio de los síntomas"
							  style="position:absolute; left:93px; top:43px;height:15px;width:15px; ">
					<h:graphicImage url="../images/delete.gif" width="14" height="14" style="right:0px; border:0px;"  />
					<f:ajax event="click" listener="#{muestreoHematicoBean.quitarInicioSintomas}" 
							render="panTratamiento" execute="@this" />

				</h:outputLink>
							 
				<h:outputLabel for="cboManejoClinico" styleClass="lblDefaultSmall" 
						 	value="Manejo Clínico:" 
					   	 	style="position:absolute; left:124px; top:26px;"/>
				<h:selectOneMenu id="cboManejoClinico" styleClass="txtDefault cboDefault"  
						 	style="position:absolute; left:124px;top:41px;width:85px;" 
						 	value="#{muestreoHematicoBean.muestreoHematicoSelected.manejoClinico}">
					<f:selectItem itemLabel="Ambulatorio" itemValue="0" />
					<f:selectItem itemLabel="Hospitalario" itemValue="1" />
				</h:selectOneMenu>
				
				<h:outputLabel for="txtInicioTratamiento" styleClass="lblDefaultSmall" 
							   value="Inicio de Tratamiento:" 
							   style="position:absolute; left:221px; top:26px;"/>
				<h:inputText id="txtInicioTratamiento" style="position:absolute; left:221px; top:41px; width:95px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}" 
							 styleClass="txtDefault iniTratamiento">
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
						<f:ajax event="blur" listener="#{muestreoHematicoBean.cambiarTratamiento}" 
							render="panTratamiento" execute="@this" />
				</h:inputText>
				<script type="text/javascript">
						jQuery('.iniTratamiento').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
				</script> 
						 
				<h:outputLink id="btnQuitarIniTratamiento" 
							  rendered="#{!empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
							  styleClass="navLink" value="javascript:void(0)"
							  title="Quitar los datos vinculados al tratamiento"
							  style="position:absolute; left:305px; top:43px;height:15px;width:15px; ">
					<h:graphicImage url="../images/delete.gif" width="14" height="14" style="right:0px; border:0px;"  />
					<f:ajax event="click"  listener="#{muestreoHematicoBean.quitarTratamiento}" 
							render="panTratamiento" execute="@this" />
				</h:outputLink>
				
				<h:outputLabel for="txtFinTratamiento" styleClass="lblDefaultSmall" 
							   value="Fin de Tratamiento:" 
							   style="position:absolute; left:325px; top:26px;"/>
				<h:inputText id="txtFinTratamiento" style="position:absolute; left:325px; top:41px; width:95px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.finTratamiento}" 
							 styleClass="txtDefault finTratamiento">
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
						<f:ajax event="blur" render="panTratamiento" execute="@this" />
				</h:inputText>
				<script type="text/javascript">
						jQuery('.finTratamiento').dateEntry({dateFormat: 'dmy/',minDate: (jQuery('.iniTratamiento').dateEntry('getDate')==null?'-7300':jQuery('.iniTratamiento').dateEntry('getDate')), maxDate: new Date()}); 
				</script> 	
							 
				<h:outputLink id="btnQuitarFinTratamiento" 
							  rendered="#{!empty muestreoHematicoBean.muestreoHematicoSelected.finTratamiento}"
							  styleClass="navLink" value="javascript:void(0)"
							  title="Quitar la declaración de la fecha de final del tratamiento"
							  style="position:absolute; left:410px; top:43px;height:15px;width:15px; ">
					<h:graphicImage url="../images/delete.gif" width="14" height="14" style="right:0px; border:0px;"  />
					<f:ajax event="click" listener="#{muestreoHematicoBean.quitarFinTratamiento}" 
							render="panTratamiento" execute="@this" />
				</h:outputLink>
				
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Días de Tratamiento" 
							   style="position:absolute; left:448px; top:8px; font-weight:bold;"/>

				<h:outputLabel for="txtEnBoca" styleClass="lblDefaultSmall" 
							   value="En Boca:" 
							   style="position:absolute; left:440px; top:26px;"/>
				<h:inputText id="txtEnBoca" style="position:absolute; left:440px; top:41px; width:50px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.tratamientoEnBoca}" maxlength="2"
							 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
							 styleClass="txtDefault boca" />	
					<script type="text/javascript">
						jQuery(".boca").format({precision: 2,allow_negative:false,autofix:true});
					</script>
				
				<h:outputLabel for="txtRemanente" styleClass="lblDefaultSmall" 
							   value="Remanente:" 
							   style="position:absolute; left:500px; top:26px;"/>
				<h:inputText id="txtRemanente" style="position:absolute; left:500px; top:41px; width:50px;"
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.tratamientoRemanente}" maxlength="2"
							 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
							 styleClass="txtDefault remanente" />
				 	<script type="text/javascript">
						jQuery(".remanente").format({precision: 2,allow_negative:false,autofix:true});
					</script>
				 	
				
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Total de Tabletas Suministradas" 
							   style="position:absolute; left:570px; top:8px; font-weight:bold;"/>

				<h:outputLabel for="txtCQ" styleClass="lblDefaultSmall" 
							   value="CQ:" 
							   style="position:absolute; left:570px; top:26px;"/>
				<h:inputText id="txtCQ"  
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.cloroquina}" styleClass="txtDefault cq" 
							 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
						     style="position:absolute; left:570px; top:41px; width:48px; text-align:left;" />
					<script type="text/javascript">
						jQuery(".cq").format({precision: 3,allow_negative:false,autofix:true});
					</script>
				
				<h:outputLabel for="txtPQ5mg" styleClass="lblDefaultSmall" 
							   value="PQ 5mg:" 
							   style="position:absolute; left:628px; top:26px;"/>
				<h:inputText id="txtPQ5mg" 
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.primaquina5mg}" styleClass="txtDefault pq5mg" 
							 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
						     style="position:absolute; left:628px; top:41px; width:48px; text-align:left;" />
					<script type="text/javascript">
						jQuery(".pq5mg").format({precision: 3,allow_negative:false,autofix:true});
					</script>
							 
				<h:outputLabel for="txtPQ15mg" styleClass="lblDefaultSmall" 
							   value="PQ 15mg:" 
							   style="position:absolute; left:685px; top:26px;"/>
				<h:inputText id="txtPQ15mg" 
							 value="#{muestreoHematicoBean.muestreoHematicoSelected.primaquina15mg}" styleClass="txtDefault pq15mg" 
							 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.inicioTratamiento}"
						     style="position:absolute; left:685px; top:41px; width:48px; text-align:left;" />
					<script type="text/javascript">
						jQuery(".pq15mg").format({precision: 3,allow_negative:false,autofix:true});
					</script>

		</p:panel>

		<p:panel id="panPRM" 
				 styleClass="panDetail" 
				 style="position:absolute; top:336px; left:5px; height:63px; width:360px;">
				 
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Prueba Rápida de Malaria" 
							   style="position:absolute; left:10px; top:8px; font-weight:bold;"/>

				<p:commandButton id="btnEditarPRM" 
						 icon="#{empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida?'icon-form-add':'icon-form-edit'}" ajax="true"
						 title="Haga clic para agregar o editar los datos de la prueba rápida de malaria"
						 style="position:absolute; left:335px;top:8px;width:21px;height:21px;"
        				 oncomplete="dlgPRM.show();" process="@this" update="frmMuestreo:panDetallePRM frmMuestreo:panButtonPRM grwMensaje" />

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Resultado:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   style="position:absolute; left:10px; top:30px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida.resultado.valor}" 
							   style="position:absolute; left:60px; top:30px; font-weight:bold; color:#{muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida.resultado.codigo!='Rst_PRMS|N'?'red':'green'};"/>
							   
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Realizada por:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   style="position:absolute; left:150px; top:30px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida.realizado.valor}" 
							   style="position:absolute; left:214px; top:30px; font-weight:bold;"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Fecha Aplicación:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   style="position:absolute; left:150px; top:46px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida.fecha}" 
							   style="position:absolute; left:230px; top:46px; font-weight:bold;" >
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				</h:outputLabel>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
							   value="No existen datos para la Prueba Rápida de Malaria" 
							   style="position:absolute; left:84px; top:30px; font-style:italic;"/>
							   
		</p:panel>
		
		<p:panel id="panPGG" 
				 styleClass="panDetail" 
				 style="position:absolute; top:336px; left:373px; height:63px; width:615px;">

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Técnica de Gota Gruesa" 
							   style="position:absolute; left:10px; top:8px; font-weight:bold;"/>

				<p:commandButton id="btnEditarPGG" 
						 icon="#{empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico?'icon-form-add':'icon-form-edit'}" ajax="true"
						 title="Haga clic para agregar o editar los datos de la prueba de gota gruesa"
						 style="position:absolute; left:590px;top:8px;width:21px;height:21px;"
        				 oncomplete="dlgPGG.show();" update="panDetallePGG panButtonPGG"  
        				 process="@this" />

				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion}"
							   value="No existen datos para la Técnica de Gota Gruesa" 
							   style="position:absolute; left:214px; top:30px; font-style:italic;"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico and empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.motivoFaltaDiagnostico}"
							   value="La muestra ha sido recepcionada pero aún no se ha registrado el diagnóstico" 
							   style="position:absolute; left:10px; top:30px; width:380px; font-style:italic;"/>							   

				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico and not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.motivoFaltaDiagnostico}"
							   value="La muestra ha sido recepcionada pero no se ha podido establecer un diagnóstico.  Motivo: #{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.motivoFaltaDiagnostico.valor}" 
							   style="position:absolute; left:10px; top:30px; width:380px; font-style:italic;"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Fecha Recepción:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion}"
							   style="position:absolute; left:173px; top:8px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion}" 
							   style="position:absolute; left:252px; top:8px; font-weight:bold;" >
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				</h:outputLabel>			

				<!-- Muestra con Diagnóstico -->

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Fecha Diagnóstico:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico}"
							   style="position:absolute; left:329px; top:8px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico}" 
							   style="position:absolute; left:415px; top:8px; font-weight:bold;" >
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				</h:outputLabel>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Resultado:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico}"
							   style="position:absolute; left:10px; top:30px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaRecepcion and not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.fechaDiagnostico}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.resultado==1?'Positivo':'Negativo'}" 
							   style="position:absolute; left:60px; top:30px; font-weight:bold; color:#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.resultado==1?'red':'green'};"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Densidad:" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.resultado==1}"
							   style="position:absolute; left:127px; top:30px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPVivax==1}"
							   value="P.vivax" 
							   style="position:absolute; left:173px; top:30px; font-weight:bold;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPFalciparum==1}"
							   value="P.falciparum" 
							   style="position:absolute; left:173px; top:#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPVivax==1?'44px':'30px'}; font-weight:bold;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPVivax==1}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.densidadPVivax.valor}" 
							   style="position:absolute; left:248px; top:30px; font-weight:bold;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPFalciparum==1}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.densidadPFalciparum.valor}" 
							   style="position:absolute; left:248px; top:#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPVivax==1?'44px':'30px'}; font-weight:bold;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   rendered="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPFalciparum==1}"
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.estadioPFalciparum.valor}" 
							   style="position:absolute; left:293px; top:#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.positivoPVivax==1?'44px':'30px'}; font-weight:bold;"/>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Realizada por:" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.unidadLaboratorio}"
							   style="position:absolute; left:329px; top:30px;"/>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="#{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.unidadLaboratorio.nombre}, #{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.unidadLaboratorio.municipio.nombre}, #{muestreoHematicoBean.muestreoHematicoSelected.diagnostico.entidadAdtvaLaboratorio.nombre}" 
							   rendered="#{not empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico.unidadLaboratorio}"
							   style="position:absolute; left:390px; top:30px; font-weight:bold;"/>

		</p:panel>		
		
		<!--   panel de botones  -->		

		<p:panel id="panButton" styleClass="panButton" 
				 style="position:absolute; top:407px; width:985px; left:5px; padding-left:0em; padding-top:0em; padding-bottom:0em;">
			
				<p:commandButton id="btnGuardar" value="Guardar" ajax="true"
								 styleClass="btnDefault" style="font-size:11px;"  
								 update="@form" 
								 process="@this,panControl,panPaciente,panTratamiento" 
								 actionListener="#{muestreoHematicoBean.guardar}" />

				<p:commandButton id="btnEliminar" value="Eliminar"  
								 disabled="#{muestreoHematicoBean.estado!=1}"
								 oncomplete="dlgEliminarMuestra.show()"
								 process="@this" 
							     styleClass="btnDefault" style="font-size:11px;"/>

				<p:commandButton value="Salir" styleClass="btnDefault" 
								 style="font-size:11px;" 
								 process="@this" 
								 onclick="document.location.replace('../inicio.xhtml');" />
			</p:panel>

		<!-- Modal para vincular colvoles  -->

		<p:dialog id="dlgColVol" header="Colaboradores Voluntarios asociados a la Unidad de Salud"  
				  modal="true" 
				  widgetVar="dlgColVol" 
				  height="475" width="680" 
				  styleClass="txtDefault"
				  resizable="false">
			
			<div style="float: left; overflow: auto; position:relative; top:5px;left:0px; width:652px; height:410px; border:1px solid rgb(211,211,211); border-radius:5px 5px 5px 5px;">
			
				<p:dataTable id="grdColVoles" var="colVolPuesto" rowKey="#{colVolPuesto.puestoNotificacionId}"
							 styleClass="panDetail" 
							 widgetVar="tablaColVoles"
							 selectionMode="single" 
							 selection="#{muestreoHematicoBean.colVolPuestoSelected}"
							 emptyMessage="Sin resultados" 
							 style="width:650px;"  
						 	 value="#{muestreoHematicoBean.colVolPuestos}" 
					 		 scrollable="true" scrollHeight="357" scrollWidth="650">
					
					<p:ajax event="rowSelect" update=":frmMuestreo:panButtonColVol" />
					<p:ajax event="rowUnselect" update=":frmMuestreo:panButtonColVol" />
			
					<f:facet name="header">
						<p:outputPanel>
        	        		<h:outputText value="&nbsp;" />
            	    	</p:outputPanel>
            		</f:facet>
					
					<p:column headerText="Clave" style="text-align:left;width:50px;">
						<h:outputText value="#{colVolPuesto.clave}" />
					</p:column>

					<p:column headerText="Nombre Colaborador Voluntario" style="text-align:left;width:350px">
						<h:outputText value="#{colVolPuesto.nombreColVol}" />
					</p:column>
					
				</p:dataTable>
			</div>
			
			<!-- Busqueda de ColVoles -->

         	<h:outputText value="Buscar:" style="position:absolute; top:15px;left:310px;color:#ffffff; font-weight:bold;"  />
         	<h:inputText id="txtFiltroColVol" value="#{muestreoHematicoBean.filtroColVol}" 
         			  onkeydown="if (event.keyCode==13) {event.keyCode=9; document.getElementById('lnkBuscarColVol').click(); return event.keyCode}"
         			  style="width:200px; position: absolute; top: 15px; left: 380px;" />
                    
	        <h:outputLink id="lnkBuscarColVol" value="javascript:void(0)" 
					styleClass="navDelLink"    
            		style="position: absolute; top: 15px; left: 590px;cursor:pointer;border:0.08em solid #9d9d9d;" >
				<h:graphicImage height="17" title="Haga clic para iniciar búsqueda"  
					style="position: absolute; top: 0px; left:0px; border:0px;"
					url="/images/buscar.gif">
				</h:graphicImage>
				<p:ajax event="click" process="@this,txtFiltroColVol"
					listener="#{muestreoHematicoBean.buscarColVol}"
					onstart="statusDialog.show();" oncomplete="statusDialog.hide();" 
					update="grdColVoles,panButtonColVol,grwMensaje">
				</p:ajax>
			</h:outputLink>

        	<h:outputLink id="lnkQuitarFiltroColVol" value="javascript:void(0)" 
				styleClass="navDelLink"    
            	style="position: absolute; top: 15px; left: 613px;cursor:pointer;border: 0.08em solid #9d9d9d;" >
				<h:graphicImage height="17" title="Haga clic para limpiar filtro de búsqueda"  
					style="position: absolute; top: 0px; left:0px; border:0px;"
					url="/images/edit-clear.png">
				</h:graphicImage>
				<p:ajax event="click" process="@this,txtFiltroColVol"
					listener="#{muestreoHematicoBean.quitarFiltroColVol}" 
					update=":frmMuestreo:txtFiltroColVol,:frmMuestreo:grdColVoles,:frmMuestreo:panButtonColVol,:frmMuestreo:grwMensaje">
				</p:ajax>
			</h:outputLink>
			
			<p></p>
			<p:panel id="panButtonColVol" style="position:absolute; top:425px; width: 652px; left:9px; padding-left:0em; padding-top:0em; padding-bottom:0em;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarColVol" 
								 disabled="#{empty muestreoHematicoBean.colVolPuestoSelected}" 
								 value="Aceptar" 
								 process="@this" ajax="true" immediate="true" 
								 styleClass="btnDefault" style="font-size:11px;"
								 update="txtColVol,txtClave,grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarColVol}"  
								 oncomplete="dlgColVol.hide()">
				</p:commandButton>
				
				<p:commandButton value="Cancelar" onclick="dlgColVol.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>


		<!-- Modal para vincular manzanas  -->

		<p:dialog id="dlgManzana" header="Lista de Manzanas para la Comunidad de Residencia"  
				  modal="true" 
				  widgetVar="dlgManzana" 
				  height="475" width="775" 
				  styleClass="txtDefault"
				  resizable="false">
			
			<div style="float: left; overflow: auto; position:relative; top:5px;left:0px; width:752px; height:410px; border:1px solid rgb(211,211,211); border-radius:5px 5px 5px 5px;">
				<p:dataTable id="grdManzanas" var="manzana" rowKey="#{manzana.manzanaId}"
							 styleClass="panDetail" paginatorPosition="top" 
							 widgetVar="tablaManzanas"
							 selectionMode="single" 
							 selection="#{muestreoHematicoBean.manzanaSelected}"
							 emptyMessage="No existen manzanas para la comunidad declarada" 
							 style="width:750px;"  
						 	 value="#{muestreoHematicoBean.manzanas}" 
					 		 paginatorAlwaysVisible="true" 
						 	 paginator="true" rows="14" >
					
					<p:ajax event="rowSelect" update=":frmMuestreo:panButtonManzana" />
					<p:ajax event="rowUnselect" update=":frmMuestreo:panButtonManzana" />
					
					<p:column headerText="Codigo" style="text-align:left;width:100px;">
						<h:outputText value="#{fn:substring(manzana.codigo,9,12)}" />
					</p:column>

					<p:column headerText="Descriptor" style="text-align:left;width:490px">
						<h:outputText value="#{manzana.observaciones}" />
					</p:column>
					
				</p:dataTable>
			</div>
			<p></p>
			<p:panel id="panButtonManzana" style="position:absolute; top:425px; width: 752px; left:9px; padding-left:0em; padding-top:0em; padding-bottom:0em;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarManzana" 
								 disabled="#{empty muestreoHematicoBean.manzanaSelected}" 
								 value="Aceptar" 
								 process="@this" ajax="true" immediate="true" 
								 styleClass="btnDefault" style="font-size:11px;"
								 update="panManzana,grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarManzana}"  
								 oncomplete="dlgManzana.hide()">
				</p:commandButton>
				
				<p:commandButton value="Cancelar" onclick="dlgManzana.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>
		
		<!-- Modal para vincular viviendas  -->

		<p:dialog id="dlgVivienda" header="Lista de Vivienda en la Comunidad de Residencia"  
				  modal="true" 
				  widgetVar="dlgVivienda" 
				  height="475" width="775" 
				  styleClass="txtDefault"
				  resizable="false">
			
			<div style="float: left; overflow: auto; position:relative; top:5px;left:0px; width:752px; height:410px; border:1px solid rgb(211,211,211); border-radius:5px 5px 5px 5px;">
				<p:dataTable id="grdViviendas" var="vivienda" rowKey="#{vivienda.viviendaId}"
							 styleClass="panDetail" paginatorPosition="top" 
							 widgetVar="tablaViviendas"
							 selectionMode="single" 
							 selection="#{muestreoHematicoBean.viviendaUltimaEncuestaSelected}"
							 emptyMessage="No existen viviendas para la comunidad declarada" 
							 style="width:750px;"  
						 	 value="#{muestreoHematicoBean.viviendas}" 
					 		 paginatorAlwaysVisible="true" 
						 	 paginator="true" rows="14" >
					
					<p:ajax event="rowSelect" update=":frmMuestreo:panButtonVivienda" />
					<p:ajax event="rowUnselect" update=":frmMuestreo:panButtonVivienda" />
					
					<p:column headerText="Codigo" style="text-align:left;width:40px;">
						<h:outputText value="#{fn:substring(vivienda.codigo,9,14)}" />
					</p:column>
					
					<p:column headerText="Tipo de Vivienda" style="text-align:left;width:70px">
						<h:outputText value="#{vivienda.tipoVivienda}" />
					</p:column>

					<p:column headerText="Jefe de Familia" style="text-align:left;width:200px">
						<h:outputText value="#{vivienda.jefeFamilia}" />
					</p:column>
					
					<p:column headerText="Hab." style="text-align:left; width:60px;">
						<h:outputText value="#{vivienda.habitantes}" />
					</p:column>

					<p:column headerText="Ocupación" style="text-align:left;width:200px">
						<h:outputText value="#{vivienda.condicionOcupacion}" />
					</p:column>
					
					<p:column headerText="Encuesta" style="text-align:left;width:90px">
						<h:outputText value="#{vivienda.fechaUltimaEncuesta}" >
							<f:convertDateTime pattern="dd/MM/yy"></f:convertDateTime>
						</h:outputText>
					</p:column>
					
				</p:dataTable>
			</div>
			<p></p>
			<p:panel id="panButtonVivienda" style="position:absolute; top:425px; width: 752px; left:9px; padding-left:0em; padding-top:0em; padding-bottom:0em;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarVivienda" 
								 disabled="#{empty muestreoHematicoBean.viviendaUltimaEncuestaSelected}" 
								 value="Aceptar" 
								 process="@this" ajax="true" immediate="true" 
								 styleClass="btnDefault" style="font-size:11px;"
								 update="panVivienda,panManzana,grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarVivienda}"  
								 oncomplete="dlgVivienda.hide()">
				</p:commandButton>
				
				<p:commandButton value="Cancelar" onclick="dlgVivienda.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>

		<!-- Modal para vincular persona   -->

		<p:dialog id="dlgReferente" header="Información de la Persona Referente"  
				  modal="true" position="center"  
				  widgetVar="dlgReferente" 
				  height="120" width="500"
				  styleClass="txtDefault"
				  resizable="false" closable="false">
			
			<p:panel id="panDetalleReferente" style="position:absolute; height:70px; top:5px; width: 470px; left:10px; " styleClass="panDetail" >
			
				<h:outputLabel for="txtNombreReferente" styleClass="lblDefaultSmall" 
							   value="Nombre del Jefe de Familia o Persona de Referencia:" 
							   style="position:absolute; left:10px; top:15px;"/>
				<h:inputText id="txtNombreReferente" style="position:absolute; left:10px; top:30px; width:305px;"
							 value="#{muestreoHematicoBean.tmpPersonaReferente}" 
							 styleClass="txtDefault" />
			
				<h:outputLabel for="txtTelefonoReferente" styleClass="lblDefaultSmall" 
							   value="Teléfono de Contacto:" 
							   style="position:absolute; left:325px; top:15px;"/>
				<h:inputText id="txtTelefonoReferente" style="position:absolute; left:325px; top:30px; width:125px;"
							 value="#{muestreoHematicoBean.tmpTelefonoReferente}" 
							 styleClass="txtDefault tlfRef" />
				<script type="text/javascript">
					jQuery(".tlfRef").format({precision: 0,allow_negative:false,autofix:true});
				</script>
				
			
			</p:panel>
			
			<p:panel id="panButtonReferente" style="position:absolute; top:85px; width: 470px; left:10px; padding-left:0em; padding-top:0em; padding-bottom:0em;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarReferente" 
								 value="Aceptar" 
								 process="@this panDetalleReferente" ajax="true"  
								 styleClass="btnDefault" style="font-size:11px;"
								 update="panReferente,grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarReferente}"  
								 oncomplete="controlAceptarReferente(xhr, status, args);">
				</p:commandButton>
				
				<p:commandButton id="btnEliminarReferente" 
								 value="Eliminar" process="@this" 
								 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.personaReferente}"
								 styleClass="btnDefault" style="font-size:11px;"
								 onclick="dlgReferente.hide();dlgConfirmarEliminarReferente.show();">
				</p:commandButton>
				
				<p:commandButton value="Cancelar" onclick="dlgReferente.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>

		<script type="text/javascript">
		  
			function controlAceptarReferente(xhr, status, args) {   
				if(!args.validationFailed &amp;&amp; args.referenteValida) {   
					dlgReferente.hide();   
				} 
			}
			
		</script>

		<!-- Modal para vincular resultados prm   -->

		<p:dialog id="dlgPRM" header="Información de la Prueba Rápida de Malaria"  
				  modal="true" position="center"  
				  widgetVar="dlgPRM" 
				  height="180" width="435" 
				  styleClass="txtDefault"
				  resizable="false" closable="false">
			
			<p:panel id="panDetallePRM" style="position:absolute; height:125px; top:5px; width: 405px; left:10px; " styleClass="panDetail" >
			
				<h:outputLabel for="txtFechaAplicacion" styleClass="lblDefaultSmall" 
							   value="Fecha de Aplicación:" 
							   style="position:absolute; left:10px; top:25px;"/>
				<h:inputText id="txtFechaAplicacion" style="position:absolute; left:10px; top:45px; width:85px;"
							 value="#{muestreoHematicoBean.muestreoPruebaRapidaSelected.fecha}" 
							 styleClass="txtDefault fechaPRM" >
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				</h:inputText>
				<script type="text/javascript">
						jQuery('.fechaPRM').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
				</script> 
			
				<h:outputLabel for="cboResultadoPRM" styleClass="lblDefaultSmall" 
							   value="Resultado:" 
							   style="position:absolute; left:135px; top:25px;"/>
				<h:selectOneRadio id="cboResultadoPRM" layout="pageDirection" 
							   styleClass="txtDefault cboDefault" 
							   style="position:absolute; left:125px; top:40px; width:125px;"
				 			   value="#{muestreoHematicoBean.resultadoPruebaRapidaSelectedId}">
					<f:selectItems var="resultadoPRM" 
							itemValue="#{resultadoPRM.catalogoId}" 
							itemLabel="#{resultadoPRM.valor}"  
							value="#{muestreoHematicoBean.resultadosPruebasRapidas}" />
				</h:selectOneRadio>
				
				<h:outputLabel for="cboResponsablePRM" styleClass="lblDefaultSmall" 
						 	value="Realizada por:" 
					   	 	style="position:absolute; left:275px; top:25px;"/>
				<h:selectOneRadio id="cboResponsablePRM" layout="pageDirection"
							styleClass="txtDefault cboDefault"  
						 	style="position:absolute; left:265px;top:40px;width:120px;" 
						 	value="#{muestreoHematicoBean.responsablePruebaRapidaSelectedId}">
					<f:selectItems var="responsablePRM" 
							itemValue="#{responsablePRM.catalogoId}" 
							itemLabel="#{responsablePRM.valor}" 
							value="#{muestreoHematicoBean.responsablesPruebasRapidas}" />
				</h:selectOneRadio>
			
			</p:panel>
			
			<p:panel id="panButtonPRM" style="position:absolute; top:140px; width: 405px; left:10px; padding-left:0em; padding-top:0em; padding-bottom:0em;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarPRM" 
								 value="Aceptar" 
								 process="@this panDetallePRM" ajax="true"  
								 styleClass="btnDefault" style="font-size:11px;"
								 update="panPRM grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarPRM}"  
								 oncomplete="controlAceptarPRM(xhr, status, args);">
				</p:commandButton>
				
				<p:commandButton id="btnEliminarPRM" 
								 value="Eliminar" process="@this"
								 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.pruebaRapida}"
								 styleClass="btnDefault" style="font-size:11px;"
								 onclick="dlgPRM.hide();dlgConfirmarEliminarPRM.show();">
				</p:commandButton>
				
				<p:commandButton value="Cancelar" onclick="dlgPRM.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>

		<script type="text/javascript">
		  
			function controlAceptarPRM(xhr, status, args) {   
				if(!args.validationFailed &amp;&amp; args.prmValida) {   
					dlgPRM.hide();   
				} 
			}
			
		</script>


		<!-- Modal para vincular resultados pgg   -->

		<p:dialog id="dlgPGGid" header="Información de la Prueba de Gota Gruesa"  
				  modal="true" position="center"  
				  widgetVar="dlgPGG" 
				  height="370" width="710" 
				  styleClass="txtDefault"
				  resizable="false" closable="false">
			
			<p:panel id="panDetallePGG" style="position:absolute; height:310px; top:5px; width: 685px; left:10px; " styleClass="panDetail" >

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Resultados de la Prueba:" 
							   style="position:absolute; left:10px; top:5px; font-weight:bold;"/>				
			
				<h:outputLabel for="txtFechaRecepcion" styleClass="lblDefaultSmall" 
							   value="Fecha de Recepción:" 
							   style="position:absolute; left:10px; top:25px;"/>
				<h:inputText id="txtFechaRecepcion" style="position:absolute; left:10px; top:45px; width:85px;"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.fechaRecepcion}" 
							 styleClass="txtDefault fechaPGG" >
						<f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				       <p:ajax event="change" process="@this" 
				       		   listener="#{muestreoHematicoBean.controlarRecepcion}" 
				 			   update="panDetallePGG"></p:ajax>
				</h:inputText>
				<script type="text/javascript">
						jQuery('.fechaPGG').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
				</script> 

				<h:outputLabel for="txtFechaDiagnostico" styleClass="lblDefaultSmall" 
							   value="Fecha de Diagnóstico:" 
							   style="position:absolute; left:110px; top:25px;"/>
				<h:inputText id="txtFechaDiagnostico" style="position:absolute; left:110px; top:45px; width:85px;"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.fechaDiagnostico}" 
							 disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.fechaRecepcion==null}"
							 styleClass="txtDefault fechaPGG" >
					   <f:convertDateTime pattern="dd/MM/yyyy"></f:convertDateTime>
				       <p:ajax event="change" process="@this" listener="#{muestreoHematicoBean.controlarDiagnostico}" 
				 			   update="cboMotivoNoDiagnostico cboResultadoPGG cboVivax cboDensidadPVivax cboFalciparum cboDensidadPFalciparum cboEstadio txtEAsexuados txtGametocitos txtLeucocitos"></p:ajax>
				</h:inputText>
				<script type="text/javascript">
						jQuery('.fechaPGG').dateEntry({dateFormat: 'dmy/',minDate: '-7300', maxDate: new Date()}); 
				</script> 

				<h:outputLabel for="cboResultadoPGG" styleClass="lblDefaultSmall" 
							   value="Resultado:" 
							   style="position:absolute; left:225px; top:25px;"/>
				<h:selectOneRadio id="cboResultadoPGG" layout="pageDirection" 
							   styleClass="txtDefaultSmall"
							   disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.fechaDiagnostico==null}" 
							   style="position:absolute; left:218px; top:40px; width:125px;"
				 			   value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado}">
				 	<f:selectItem itemValue="0" itemLabel="Negativo" />
				 	<f:selectItem itemValue="1" itemLabel="Positivo" />
				 	<p:ajax event="change" process="cboResultadoPGG" listener="#{muestreoHematicoBean.cambiarResultado}" 
				 				update="cboVivax cboDensidadPVivax cboFalciparum cboDensidadPFalciparum cboEstadio txtEAsexuados txtGametocitos txtLeucocitos"></p:ajax>
				</h:selectOneRadio>
				
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Densidad Parasitaria:" 
							   style="position:absolute; left:305px; top:25px;"/>
							   
				<h:selectBooleanCheckbox id="cboVivax" 
							   styleClass="txtDefault" label="P.vivax"
							   disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado!=1}" 
							   style="position:absolute; left:305px; top:45px;"
				 			   value="#{muestreoHematicoBean.positivoPVivax}">
				 		<p:ajax event="change" process="cboVivax" 
				 				listener="#{muestreoHematicoBean.controlarVivax}" 
				 				update="cboVivax cboDensidadPVivax"></p:ajax>
				</h:selectBooleanCheckbox>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="P.vivax" 
							   style="position:absolute; left:325px; top:45px;"/>

				<h:selectOneMenu id="cboDensidadPVivax" 
							styleClass="txtDefault cboDefault"
							disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.positivoPVivax!=1}"  
						 	style="position:absolute; left:400px;top:45px;width:85px;" 
						 	value="#{muestreoHematicoBean.densidadPVivaxSelectedId}">
					<f:selectItem itemValue="0" itemLabel="" /> 
					<f:selectItems var="densidadPVivax" 
							itemValue="#{densidadPVivax.catalogoId}" 
							itemLabel="#{densidadPVivax.valor}" 
							value="#{muestreoHematicoBean.densidadCruces}" />
				</h:selectOneMenu>
				
				<h:selectBooleanCheckbox id="cboFalciparum" 
							   styleClass="txtDefault" 
							   disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado!=1}"
							   style="position:absolute; left:305px; top:70px;"
				 			   value="#{muestreoHematicoBean.positivoPFalciparum}">
				       <p:ajax event="change" process="cboFalciparum" 
				 			   update="cboFalciparum cboDensidadPFalciparum cboEstadio"></p:ajax>
				</h:selectBooleanCheckbox>
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="P.falciparum" 
							   style="position:absolute; left:325px; top:70px;"/>
				
				<h:selectOneMenu id="cboDensidadPFalciparum" 
							styleClass="txtDefault cboDefault"  
							disabled="#{!muestreoHematicoBean.positivoPFalciparum}"
						 	style="position:absolute; left:400px;top:70px;width:85px;" 
						 	value="#{muestreoHematicoBean.densidadPFalciparumSelectedId}">
					<f:selectItem itemValue="0" itemLabel="" /> 
					<f:selectItems var="densidadPFalciparum" 
							itemValue="#{densidadPFalciparum.catalogoId}" 
							itemLabel="#{densidadPFalciparum.valor}" 
							value="#{muestreoHematicoBean.densidadCruces}" />
				</h:selectOneMenu>
				
				<h:outputLabel for="cboEstadio" styleClass="lblDefaultSmall" 
							   value="Estadío:" 
							   style="position:absolute; left:305px; top:95px;"/>
				<h:selectOneRadio id="cboEstadio" layout="lineDirection" 
							   disabled="#{!muestreoHematicoBean.positivoPFalciparum}"
							   styleClass="txtDefault cboDefault" 
							   style="position:absolute; left:345px; top:95px;"
				 			   value="#{muestreoHematicoBean.estadioPFalciparumSelectedId}">
					<f:selectItems var="estadio" 
							itemValue="#{estadio.catalogoId}" 
							itemLabel="#{estadio.valor}"  
							value="#{muestreoHematicoBean.estadiosPFalciparum}" />
				</h:selectOneRadio>
				
				<h:outputLabel for="txtEAsexuados" styleClass="lblDefaultSmall" 
							   value="E.asexuados:" 
							   style="position:absolute; left:506px; top:45px;"/>
				<h:inputText id="txtEAsexuados" style="position:absolute; left:575px; top:45px; width:85px;"
							 disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado!=1}"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.estadiosAsexuales}" maxlength="6"
							 styleClass="txtDefault eAsexuado" />
				 	<script type="text/javascript">
						jQuery(".eAsexuado").format({precision: 6,allow_negative:false,autofix:true});
					</script>
				
				<h:outputLabel for="txtGametocitos" styleClass="lblDefaultSmall" 
							   value="Gametocitos:" 
							   style="position:absolute; left:506px; top:70px;"/>
				<h:inputText id="txtGametocitos" style="position:absolute; left:575px; top:70px; width:85px;"
							 disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado!=1}"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.gametocitos}" maxlength="6"
							 styleClass="txtDefault gametocito" />
				 	<script type="text/javascript">
						jQuery(".gametocito").format({precision: 6,allow_negative:false,autofix:true});
					</script>
				
				<h:outputLabel for="txtLeucocitos" styleClass="lblDefaultSmall" 
							   value="Leucocitos:" 
							   style="position:absolute; left:506px; top:95px;"/>
				<h:inputText id="txtLeucocitos" style="position:absolute; left:575px; top:95px; width:85px;"
							 disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.resultado!=1}"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.leucocitos}" maxlength="6"
							 styleClass="txtDefault leucocito" />
				 	<script type="text/javascript">
						jQuery(".leucocito").format({precision: 6,allow_negative:false,autofix:true});
					</script>
				
				<h:outputLabel for="cboMotivoNoDiagnostico" styleClass="lblDefaultSmall" 
							   value="Especificar el motivo de la ausencia de diagnóstico para la muestra recepcionada:" 
							   style="position:absolute; left:10px; top:140px; font-weight:bold;"/>
				<h:selectOneMenu id="cboMotivoNoDiagnostico" 
							styleClass="txtDefault cboDefault" 
							disabled="#{muestreoHematicoBean.muestreoDiagnosticoSelected.fechaDiagnostico!=null}" 
						 	style="position:absolute; left:445px;top:140px;width:220px;" 
						 	value="#{muestreoHematicoBean.motivoFaltaDiagnosticoSelectedId}">
					<f:selectItem itemValue="0" itemLabel="" /> 
					<f:selectItems var="motivoNoDiagnostico" 
							itemValue="#{motivoNoDiagnostico.catalogoId}" 
							itemLabel="#{motivoNoDiagnostico.valor}" 
							value="#{muestreoHematicoBean.motivosFaltaDiagnosticos}" />
				</h:selectOneMenu>
				
				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Datos del Laboratorio o Unidad de Salud que recepcionó y/o analizó la muestra:" 
							   style="position:absolute; left:10px; top:180px; font-weight:bold;"/>				
				
			    <h:outputLabel for="cboEntidadLab" styleClass="lblDefaultSmall" 
							   value="Entidad Administrativa:" 
							   style="position:absolute; left:10px; top:203px;"/>
				<h:selectOneMenu id="cboEntidadLab" styleClass="txtDefault cboDefault" 
								 style="position:absolute; left:10px;top:223px;width:245px;" 
								 value="#{muestreoHematicoBean.entidadLaboratorioSelectedId}">
						<f:selectItems value="#{muestreoHematicoBean.entidadesLaboratorios}" var="entidadLab"
									   itemValue="#{entidadLab.entidadAdtvaId}"
									   itemLabel="#{entidadLab.nombre}" />
						<p:ajax event="change" 
								update="@this grwMensaje" />  
				</h:selectOneMenu>

				<h:outputLabel for="txtUnidadLab" styleClass="lblDefaultSmall" 
							   value="Unidad de Salud/Laboratorio:" 
							   style="position:absolute; left:273px; top:203px;"/>
		    	<p:autoComplete id="txtUnidadLab" value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.unidadLaboratorio}" 
     							minQueryLength="3" maxResults="10" queryDelay="300"  
     							disabled="#{muestreoHematicoBean.entidadLaboratorioSelectedId==0}"  
     							forceSelection="true" styleClass="txtDefault" required="true" 
		     					title="Para buscar, escriba parte del nombre de la unidad de salud o laboratorio donde se analizó la muestra. Unicamente se presentarán los primeros 10 resultados que coinciden con el texto ingresado."   
								completeMethod="#{muestreoHematicoBean.completarUnidadLaboratorio}" 
								var="unidadLaboratorio" style="position:absolute; left:269px; top:223px; width:387px;"
								converter="unidadConverter" 
								itemLabel="#{unidadLaboratorio.nombre}" size="93" 
								itemValue="#{unidadLaboratorio}">
								<p:column headerText="Unidad" selectionMode="single">#{unidadLaboratorio.nombre}</p:column>
								<p:column headerText="Municipio">#{unidadLaboratorio.municipio.nombre}</p:column>
								<p:ajax event="itemSelect" 
										update="@this grwMensaje txtMunicipioLab" />  
				</p:autoComplete>

				<h:outputLabel styleClass="lblDefaultSmall" 
							   value="Municipio:" 
							   style="position:absolute; left:10px; top:251px;"/>
				<h:inputText id="txtMunicipioLab" styleClass="txtDefault"
								 disabled="true" 
								 style="position:absolute; left:10px;top:270px;width:240px;" 
								 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.unidadLaboratorio.municipio.nombre}" /> 

				<h:outputLabel for="txtLaboratorista" styleClass="lblDefaultSmall" 
							   value="Nombre del Laboratorista:" 
							   style="position:absolute; left:273px; top:251px;"/>
				<h:inputText id="txtLaboratorista" style="position:absolute; left:273px; top:270px; width:387px;"
							 value="#{muestreoHematicoBean.muestreoDiagnosticoSelected.laboratorista}" maxlength="100" required="true"
							 styleClass="txtDefault" />

			</p:panel>
			
			<p:panel id="panButtonPGG" style="position:absolute; top:325px; width: 685px; left:10px;" styleClass="panButton" > 
				<p:commandButton id="btnAceptarPGG" 
								 value="Aceptar" 
								 process="@this panDetallePGG" ajax="true"  
								 styleClass="btnDefault" style="font-size:11px;"
								 update="panPGG grwMensaje" 
								 actionListener="#{muestreoHematicoBean.aceptarPGG}"  
								 oncomplete="controlAceptarPGG(xhr, status, args);">
				</p:commandButton>
				
				<p:commandButton id="btnEliminarPGG" 
								 value="Eliminar" process="@this"
								 disabled="#{empty muestreoHematicoBean.muestreoHematicoSelected.diagnostico}"
								 styleClass="btnDefault" style="font-size:11px;"
								 onclick="dlgPGG.hide();dlgConfirmarEliminarPGG.show();">
				</p:commandButton>
				
				
				<p:commandButton value="Cancelar" onclick="dlgPGG.hide()"
								 style="font-size:11px;"
								 type="button" styleClass="btnDefault"/>
			</p:panel>
			
		</p:dialog>

		<script type="text/javascript">
		  
			function controlAceptarPGG(xhr, status, args) {   
				if(!args.validationFailed &amp;&amp; args.pggValida) {   
					dlgPGG.hide();   
				} 
			}
			
		</script>
		
		<p:confirmDialog message="Desea eliminar los datos de la persona referente?"
				modal="true" header="Aviso" severity="alert" 
				widgetVar="dlgConfirmarEliminarReferente">
			<p:commandButton id="btnSiEliminarReferente" value="Si" immediate="true"
							 styleClass="btnDefault" style="font-size:11px;" ajax="true"
							 process="btnSiEliminarReferente"
							 update="panReferente :frmMuestreo:panDetalleReferente grwMensaje" 
							 actionListener="#{muestreoHematicoBean.eliminarReferente}"  
							 oncomplete="dlgConfirmarEliminarReferente.hide()">
			</p:commandButton>
			<p:commandButton value="No" onclick="dlgConfirmarEliminarReferente.hide()"
							 style="font-size:11px;" styleClass="btnDefault" 
							 type="button" /> 
		</p:confirmDialog>
		
		<!-- Modal para confirmar eliminación de los resultados de la prueba rápida-->
		
		<p:confirmDialog message="Desea eliminar los resultados de la prueba rápida de malaria?"
				modal="true" header="Aviso" severity="alert" 
				widgetVar="dlgConfirmarEliminarPRM">
			<p:commandButton id="btnSiEliminarPRM" value="Si" immediate="true"
							 styleClass="btnDefault" style="font-size:11px;" ajax="true"
							 process="btnSiEliminarPRM"
							 update="panPRM panDetallePRM grwMensaje" 
							 actionListener="#{muestreoHematicoBean.iniciarPRM}"  
							 oncomplete="dlgConfirmarEliminarPRM.hide()">
			</p:commandButton>
			<p:commandButton value="No" onclick="dlgConfirmarEliminarPRM.hide()"
							 style="font-size:11px;" styleClass="btnDefault" 
							 type="button" /> 
		</p:confirmDialog>
		
		<p:confirmDialog message="Desea eliminar los resultados de la gota gruesa?"
				modal="true" header="Aviso" severity="alert" 
				widgetVar="dlgConfirmarEliminarPGG">
			<p:commandButton id="btnSiEliminarPGG" value="Si" immediate="true"
							 styleClass="btnDefault" style="font-size:11px;" ajax="true"
							 process="btnSiEliminarPGG"
							 update="panPGG panDetallePGG grwMensaje" 
							 actionListener="#{muestreoHematicoBean.iniciarPGG}"  
							 oncomplete="dlgConfirmarEliminarPGG.hide()">
			</p:commandButton>
			<p:commandButton value="No" onclick="dlgConfirmarEliminarPGG.hide()"
							 style="font-size:11px;" styleClass="btnDefault" 
							 type="button" /> 
		</p:confirmDialog>
		
		<p:confirmDialog message="Desea eliminar el registro del muestreo hemático?"
				modal="true" header="Aviso" severity="alert" 
				widgetVar="dlgConfirmarEliminarMuestra">
			<p:commandButton id="btnSiEliminarMuestra" value="Si" immediate="true"
							 styleClass="btnDefault" style="font-size:11px;" ajax="true"
							 process="btnSiEliminarMuestra"
							 update="@form grwMensaje" 
							 actionListener="#{muestreoHematicoBean.eliminar}"  
							 oncomplete="dlgConfirmarEliminarMuestra.hide()">
			</p:commandButton>
			<p:commandButton value="No" onclick="dlgConfirmarEliminarMuestra.hide()"
							 style="font-size:11px;" styleClass="btnDefault" 
							 type="button" /> 
		</p:confirmDialog>
		
		<sis:persona id="panPersona" 
					 widgetVarEdit="dlgPersona" 
					 widgetVarSerch="dlgBusquedaPersona" 
					 value="#{muestreoHematicoBean.personaSelected}"
					 headerEdit="Datos del Paciente"
					 headerList="Lista de Personas" 
					 formName="frmMuestreo" update="frmMuestreo:panPaciente"
					 personDataPanel="panDatosPersona"
					 buttonEditPanel="panBotonesEdicion"
					 personSearchTable="grdResultadoBusquedaPersonas"
					 searchMode="#{muestreoHematicoBean.estado==0?true:false}"
					 messageComponent="grwMensaje"  />

		
	</h:form>
	
	</f:view>
	
	</ui:define>
	</ui:composition>

</h:body>

</html>
